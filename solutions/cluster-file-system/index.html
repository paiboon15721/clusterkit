<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><title>ClusterKit</title><link rel="shortcut icon" type=image/png href=/clusterkit/favicon.ico><link rel=stylesheet href=/clusterkit/scss/main.min.7bd1859712faee622241ca2e29b87cea2e5ae15e94cb8bc43594460cdf83adca.css></head><body><nav class="navbar navbar-expand-lg navbar-light fixed-top"><div class=container><a class=navbar-brand href=/clusterkit/><img src=/clusterkit/logo.png height=45 class="d-inline-block align-top" alt="ClusterKit logo"></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarsExampleDefault aria-controls=navbarsExampleDefault aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarsExampleDefault><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=/clusterkit/>หน้าหลัก</a></li><li class=nav-item><a class=nav-link href=/clusterkit/solutions/>โซลูชั่น</a></li><li class=nav-item><a class=nav-link href=/clusterkit/training-courses/>เทรนนิ่ง</a></li><li class=nav-item><a class=nav-link href=/clusterkit/success-stories/>ผลงานของเรา</a></li><li class=nav-item><a class=nav-link href=/clusterkit/blogs/>บล็อก</a></li><li class=nav-item><a class=nav-link href=/clusterkit/about-us/>เกี่ยวกับเรา</a></li><li class=nav-item><a class=nav-link href=/clusterkit/contact-us/>ติดต่อเรา</a></li></ul><a href=callto:028813800><span class=navbar-text><i class="fas fa-phone mr-2"></i>0 2881 3800</span></a></div></div></nav><main role=main><div class=container><div class=row><div class=col-md-8><h1 class=display-5>Cluster File System</h1><div class=markdown><p>จากอดีตจนถึงปัจจุบัน ไม่ว่าระบบการประมวลผลของคอมพิวเตอร์จะก้าวหน้ารวดเร็วไปสักแค่ใหนก็ตาม แต่ก็มักจะเกิดปัญหาคอขวดในการรับส่งข้อมูลของระบบจัดเก็บข้อมูล อันเนื่องมาจากระบบจัดเก็บข้อมูล โดยเฉพาะระบบคลัสเตอร์ต่าง ๆ อันเนื่องมาจากระบบคอมพิวเตอร์คลัสเตอร์ประกอบด้วยเครื่องคอมพิวเตอร์จำนวนมากที่ช่วยกันประมวลผลข้อมูล ซึ่งเครื่องเหล่านี้จะต้องอ่านเขียนข้อมูลกับไฟล์เซิร์ฟเวอร์ ซึ่งอาจเป็นเครื่อง ๆ เดียว แต่ต้องรองรับการเขียนข้อมูลจากระบบคลัสเตอร์ทั้งระบบ ทำให้เกิดปัญหาความล่าช้าในการอ่านเขียนข้อมูลเกิดขึ้นอันเนื่องมาจากการแย่งกันเขียนข้อมูลของเครื่องในระบบคลัสเตอร์และ I/O ของเครื่องไฟล์เซิร์ฟเวอร์ที่มีต่ำกว่าข้อมูลที่จะเขียนลงไฟล์เซิร์ฟเวอร์ทำให้เกิดปัญหาคอขวดในการรับส่งข้อมูลเกิดขึ้น หรือบางครั้งเราอาจจะต้องการ พื้นที่ในการจัดเก็บไฟล์ที่ใหญ่กว่าที่ไฟล์ซิสเต็มส์ปกติจะสามารถสร้างขึ้นมาได้ หรือเราอาจจะต้องการรวมพื้นที่จากแต่ละเครื่องมารวมกันและสร้างพื้นที่จัดเก็บ ข้อมูลขนาดใหญ่เพียงก้อนเดียว</p><p>ระบบไฟล์แบบคลัสเตอร์ จึงเกิดขึ้นเพื่อแก้ไขปัญหาดังกล่าว โดยใช้หลักการเปลี่ยนจากไฟล์เซิร์ฟเวอร์เพียงเครื่องเดียวเป็นใช้หลายเครื่องมาช่วยกัน อ่าน/เขียน ข้อมูล เราจึงเรียกระบบนี้ว่า Cluster File System โดยหลักการทำงานของคลัสเตอร์ไฟล์ซิสเต็ม คือ ใช้หลักการกระจายไฟล์และ แบ่งไฟล์กระจายไปเก็บที่เครื่องหลาย ๆ เครื่อง ในการอ่านเขียนไฟล์จากเครื่องคอมพิวเตอร์จำนวนมาก จะติดต่อไปยังกลุ่มเครื่องให้บริการไฟล์เซิร์ฟเวอร์ ซึ่งประกอบด้วยไฟล์เซิร์ฟเวอร์หลาย ๆ เครื่องแทน ทำให้ระบบภาระงานในการอ่านและเขียนไฟล์นั้นถูกกระจายกันออกไปยังเครื่องไฟล์หลาย ๆ เครื่อง แทนที่ภาระงานนั้นจะตกอยู่กับเพียงเครื่อง ๆ เดียว ทำให้ระบบสามารถให้บริการได้ดีขึ้น</p><div class="d-flex my-4"><figure class="figure mx-auto"><img src=/clusterkit/imgs/solutions/lustre-1.png class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure."><figcaption class="figure-caption text-center">Lustre Logo</figcaption></figure></div><p>lustre นั้นเป็นระบบ Cluster File System ระบบหนึ่งที่นิยมใช้กันแพร่หลายในระบบสมรรถนะสูงปัจจุบัน โดย lustre นั้นมาจากคำผสมของคำว่า linux และ cluster โดยกว่า 40% ของ 100 ระบบคอมพิวเตอร์คลัสเตอร์ที่มีประสิทธิภาพสูงที่สุดนั้น ล้วนใช้ lustre ทั้งนั้น ซึ่งในปัจจุบันมีหลายหน่วยงาน ในหลากหลายวงการ ไม่ว่าจะเป็น วงการอุตสาหกรรม พลังงาน การเงิน การศึกษา โดย lustre นั้น ถูกออกแบบมาให้มีประสิทธิภาพในการทำงาน เพื่อรองรับคุณสมบัติระบบการกระจายข้อมูล สามารถรองรับการขยายตัวของระบบได้ สามารถรองรับลูกข่ายที่จะเข้ามาใช้งานในระบบได้เป็นจำนวนมาก</p><h2 id=ข-อด-ของ-lustre>ข้อดีของ lustre</h2><ol><li>จัดการ I/O ได้อย่างมีประสิทธิภาพ ทั้งในด้านการจัดการข้อมูลแบบต่อเนื่อง และแบบกระจาย</li><li>มีเสถียรภาพใหนการทำงาน มีการตรวจจับความผิดพลาดและแก้ไขโดยอัตโนมัติ</li><li>รองรับการขยายตัวของระบบได้ง่าย รองรับลูกข่ายได้มาก</li><li>รองรับการเข้าถึงระบบไฟล์ในระดับ petabytes</li><li>การพัฒนาของ lustre เป็นการพัฒนาแบบ open source</li><li>รองรับมาตรฐานเปิดของระบบเครือข่าย และมาตรฐาน POSIX</li></ol><h2 id=ส-วนประกอบของ-lustre>ส่วนประกอบของ lustre</h2><p>lustre นั้นประกอบไปด้วยส่วนต่าง ๆ ที่สำคัญคือ</p><ol><li>Metadata Server (MDS) เป็นเครื่องเซิร์ฟเวอร์ที่สร้างข้อมูลเมตาดาต้าไปจัดเก็บยังหน่วจัดเก็บข้อมูล (MDTs) ทำหน้าที่ จัดการ การอ่านเขียนข้อมูล และจัดการไดเรคทอรีในระบบไฟล์</li><li>Metadata Targets (MDT) เป็นหน่วยจัดเก็บข้อมูลของเมตาดาต้า เช่น ชื่อไฟล์, ไดเรกทอรี, สิทธิ์ และรูปแบบไฟล์ เป็นต้น บนเครื่อง MDS</li><li>Object Storage Servers (OSS) เป็นเครื่องเซิร์ฟเวอร์ที่เชื่อมต่อกับหน่วยจัดเก็บข้อมูลย่อย (OSTs) ทำหน้าที่ให้บริการไฟล์ I/O และการร้องขอผ่านเครือข่าย</li><li>Object Storage Target (OST) เป็นหน่วยจัดเก็บไฟล์ข้อมูลบนหนึ่งหรือหลาย ๆ เครื่อง OSS Lustre clients เป็นเครื่องไคลเอ็นท์ที่ร้องขอการอ่านเขียนไฟล์บนระบบ Lustre โดยเครื่องไคลเอ็นท์ต้องทำการเชื่อมต่อมายังเครือง MDS ก่อน</li></ol><div class="d-flex my-4"><figure class="figure mx-auto"><img src=/clusterkit/imgs/solutions/lustre-2.jpg class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure."><figcaption class="figure-caption text-center">Lustre Architecture</figcaption></figure></div><h2 id=หล-กการทำงานของ-lustre>หลักการทำงานของ Lustre</h2><p>หลักการทำงานของ lustre โดยคร่าว ๆ จะเป็นดังนี้</p><ol><li>เครื่อง client จะทำการร้องขอข้อมูลที่ต้องการไปที MDS</li><li>MDS ค้นข้อมูลตำแหน่งไฟล์ที่ร้องขอมาว่าเก็บไฟล์ไว้ที่เครื่อง OSS ใดบ้าง</li><li>OSS ส่งไฟล์ข้อมูลกลับไปยัง Client โดยตรง</li></ol><p>ซึ่งในการทำงานจริง ๆ นั้น เราจะ mount disk จากเครื่อง MDS โดยเห็นเป็น disk ก้อนเดียว เสมือนเป็น disk ปกติ โดยเครื่อง MDS นั้นจะเป็นคนจัดการควบคุม ส่วนการอ่าน/เขียนไฟล์จากเครื่อง OSS ต่าง ๆ ทั้งหมด</p><div class="d-flex my-4"><figure class="figure mx-auto"><img src=/clusterkit/imgs/solutions/lustre-3.jpg class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure."><figcaption class="figure-caption text-center">หลักการทำงานของ Lustre</figcaption></figure></div><div class="d-flex my-4"><figure class="figure mx-auto"><img src=/clusterkit/imgs/solutions/lustre-4.jpg class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure."><figcaption class="figure-caption text-center">Lustre Architecture</figcaption></figure></div><h2 id=การต-ดต-งระบบ-lustre>การติดตั้งระบบ Lustre</h2><p>ในการติดตั้งระบบ Lustre สามารถติดตั้งผ่าน Repository ของ Lustre ที่ <a href=https://downloads.whamcloud.com/public/lustre target=_blank>https://downloads.whamcloud.com/public/lustre</a>
โดยใช้ yum หรือ Download Package มาติดตั้งเองหรืออีกวิธีหนึ่งคือการติดตั้งผ่านซอฟต์แวร์ Integrate Manager for Lustre (IML)</p><h2 id=integrate-manager-for-lustre-iml>Integrate Manager for Lustre (IML)</h2><p>ซอฟต์แวร์ IML นี้จะเป็นซอฟต์แวร์ช่วยในการติดตั้งซอฟต์แวร์ Lustre แก่เครื่องในระบบ และบริหารจัดการระบบ Lustre โดยการ Monitoring ระบบ, สามารถบริหารจัดการ Resource ที่แชร์อยู่ระหว่าง MDS/OSS เพื่อทำ High Availability ของระบบ Lustre ได้</p><h2 id=high-availability-ในระบบ-lustre>High Availability ในระบบ Lustre</h2><p>Integrate Manager for Lustre นั้น ถ้าติดตั้งบนระบบที่ออกแบบมาสำหรับทำ High Availability คือเครื่องแต่ละส่วนของระบบ Lustre เช่น MDS และ OSS นั้น จะมีเป็นคู่ ๆ โดยในคู่เครื่องนั้น ๆ จะสามารถ mount LUN ที่แชร์ระหว่างกันได้ โดยในการเม้าท์ LUN จะใช้ซอฟต์แวร์ Corosync/Pacmaker/PCS ในการจัดการผ่านหน้า Web GUI ของ IML โดยในแต่ละคู่จะต้องมี interface ที่ต่อ crossover กันอยู่ เพื่อตรวจสอบสถานะของคู่ว่าเครื่องยังทำงานอยู่หรือไม่</p><p>และบน Production ควรมีพอร์ต Out-of-band Management (Idrac/ILO/ILOM) เชื่อมต่อไว้ด้วย เมื่อระบบมีปัญหา IML จะสามารถยิง IPMI Command เพื่อไปสั่งการเครื่องในระบบ Lustre ให้เปิด,ปิด ระบบได้ ส่วน Lustre Network จะเป็นวงที่ให้บริการ Lustre แก่ Client ซึ่งมักจะเป็น Network ความเร็วสูง เช่น 10GbE หรือ Infiniband</p><div class="d-flex my-4"><figure class="figure mx-auto"><img src=/clusterkit/imgs/solutions/lustre-5.png class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure."><figcaption class="figure-caption text-center">Lustre Architecture</figcaption></figure></div><p>ซึ่งในระบบใหญ่ ๆ นั้น เราสามารถเซ็ต lustre ได้หลายรูปแบบ ตามงบประมาณและความเหมาะสม</p><h2 id=ผลงานท-ผ-านมา>ผลงานที่ผ่านมา</h2><p>คลัสเตอร์คิท เป็นบริษัทคนไทยบริษัทแรก และบริษัทเดียวที่รับความไว้วางใจให้ดำเนินการติดตั้งซอฟต์แวร์ระบบไฟล์ lustre ให้กับหลายองค์กร รวมถึงระบบคลัสเตอร์ที่มีความเร็วในการประมวลผลสูงที่สุด 3 อันดับแรกของประเทศ ซึ่งประกอบด้วย</p><ul><li><a href=/clusterkit/success-stories/thaigrid target=_blank>ระบบคลัสเตอร์ &#34;เทรา&#34;</a>
ขนาด 800 คอร์ ของศูนย์ไทยกริดแห่งชาติ</li><li><a href=/clusterkit/success-stories/biotec target=_blank>ระบบคลัสเตอร์ &#34;Eclipse&#34;</a>
ขนาด 704 คอร์ ของ <a href=http://biotec.or.th target=_blank>ศูนย์พันธุวิศวกรรมและเทคโนโลยีชีวภาพแห่งชาติ (BIOTEC)</a></li><li><a href=/clusterkit/success-stories/ru target=_blank>ระบบคลัสเตอร์ &#34;ศิลา&#34;</a>
ขนาด 284 คอร์ ของ <a href=http://www.rd.ru.ac.th/ target=_blank>สถาบันวิจัยและพัฒนา มหาวิทยาลัยรามคำแหง</a></li><li><a href=/clusterkit/success-stories/gistda target=_blank>ระบบเก็บบริการข้อมูลโครงการดิจิตอลไทยแลนด์</a>
เพื่อเก็บภาพถ่ายดาวเทียม จากดาวเทียมธีออส (THEOS)&rdquo; ของ <a href=https://www.gistda.or.th target=_blank>สำนักงานพัฒนาเทคโนโลยีอวกาศและภูมิสารสนเทศ (องค์การมหาชน)</a></li><li><a href=/clusterkit/success-stories/haii target=_blank>ระบบ HAII Cluster</a>
ขนาด 432 core ของ <a href=https://www.hii.or.th target=_blank>สถาบันสารสนเทศทรัพยากรน้ำและการเกษตร (HAII) เพื่อการวิจัยลมและน้ำ</a></li></ul></div></div><div class=col-md-4><div class=list-group><a href=https://paiboon15721.github.io/clusterkit/solutions/ceph-storage/ class="list-group-item list-group-item-action">Ceph Storage</a>
<a href=https://paiboon15721.github.io/clusterkit/solutions/cluster-file-system/ class="list-group-item list-group-item-action active">Cluster File System</a>
<a href=https://paiboon15721.github.io/clusterkit/solutions/web-cluster/ class="list-group-item list-group-item-action">Web Cluster</a>
<a href=https://paiboon15721.github.io/clusterkit/solutions/computing-hpc-cluster/ class="list-group-item list-group-item-action">Computing (HPC) Cluster</a></div></div></div></div></main><footer class="container pt-2 mb-md-4 mt-5 pt-md-3"><div class=row><div class="col-12 col-sm-6 col-md"><h5>บริษัท คลัสเตอร์คิท จำกัด</h5><ul class="list-unstyled text-small"><li class=text-muted>เลขที่ 91 ซ.ริมคลองชักพระ<br>ถนนบางขุนนนท์ แขวงบางขุนนนท์<br>เขตบางกอกน้อย กทม. 10700<br>เลขทะเบียนนิติบุคคล: 0105550004011</li><li class="text-muted my-2"><a href=callto:028813800><span><i class="fas fa-phone mr-2"></i>0 2881 3800</span></a></li><li class="text-muted my-2"><a href=mailto:info@clusterkit.co.th><span><i class="fas fa-envelope mr-2"></i>info@clusterkit.co.th</span></a></li><li class="text-muted my-2"><a href=https://www.facebook.com/clusterkit target=_blank><span><i class="fab fa-facebook-square mr-2"></i>ClusterKit</span></a></li></ul></div><div class="col-12 col-sm-6 col-md"><h5>ClusterKit</h5><ul class="list-unstyled text-small"><li><a class=text-muted href=/clusterkit/>หน้าหลัก</a></li><li><a class=text-muted href=/clusterkit/solutions/>โซลูชั่น</a></li><li><a class=text-muted href=/clusterkit/training-courses/>เทรนนิ่ง</a></li><li><a class=text-muted href=/clusterkit/success-stories/>ผลงานของเรา</a></li><li><a class=text-muted href=/clusterkit/blogs/>บล็อก</a></li><li><a class=text-muted href=/clusterkit/about-us/>เกี่ยวกับเรา</a></li><li><a class=text-muted href=/clusterkit/contact-us/>ติดต่อเรา</a></li></ul></div><div class="col-12 col-sm-6 col-md"><h5>ClusterKit Tutorial</h5><ul class="list-unstyled text-small"><li><a class=text-muted href=http://www.clusterkit.co.th/pdf/ZorinOS.pdf target=_blank>Zonrin OS Education</a></li><li><a class=text-muted href=http://www.clusterkit.co.th/pdf/SparkLocal&Zeppelin.pdf target=_blank>Apache Spark and Zeppelin</a></li><li><a class=text-muted href=http://www.clusterkit.co.th/pdf/WRF3.8.1_InstallationGuide.pdf target=_blank>WRF on Rocks Cluster</a></li><li><a class=text-muted href=http://www.clusterkit.co.th/pdf/MariaDBGaleraCluster_Tutorial.pdf target=_blank>MariaDB Galera Cluster</a></li><li><a class=text-muted href=http://www.clusterkit.co.th/pdf/OpenStack_Tutorial.pdf target=_blank>OpenStack</a></li><li><a class=text-muted href=http://www.clusterkit.co.th/pdf/EC2_Tutorial.pdf target=_blank>Amazon EC2</a></li></ul></div><div class="col-12 col-sm-6 col-md"><h5>บริการสารสนเทศ</h5><ul class="list-unstyled text-small"><li><a class=text-muted href=http://www.clusterkit.co.th/pdf/CloudComputingWithOpenSourceOssfest11.pdf target=_blank>Cloud Computing With Open Source</a></li><li><a class=text-muted href=http://www.clusterkit.co.th/pdf/MySQL_Cluster_Ossfest11.pdf target=_blank>MySQL Cluster</a></li><li><a class=text-muted href=http://www.clusterkit.co.th/pdf/HPC-Intro-EGAT.pdf target=_blank>Cluster HPC on Open Source</a></li></ul></div><div class="col-12 border-top mt-3"><small class="d-block text-muted my-4">Copyright &copy; 2007-2019 ClusterKit All rights
reserved.</small></div></div></footer><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js integrity=sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script><script>var $nav=$('.navbar')
var $navCollapse=$('.navbar-collapse')
$(document).scroll(function(){$nav.toggleClass('bg-light',$(this).scrollTop()>$nav.height())})
$('main, footer').on('click',function(){$navCollapse.collapse('hide')})</script></body></html>